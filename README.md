# Monkey

This is my implementation of the interpreter described in the book 
[Writing An Interpreter In Go][interpreter-book]. Because I'm quite 
familiar with the parsing stuff I decided to port the code base to
use autogenerated parser with [ANTLR4][antlr]. There is a 
[Go runtime][go-antlr-rt] which must be in your `$GOPATH` to build.

## Build the Stuff

To generate the ANTLR parser source (in the directory `antlr` in this
project directory) and then build the Monkey invoke:

    $> ./build.sh

This will generate the ANTLR sources and compile an executable to
`$GOPATH/bin/monky`.

The grammar is defined in `antlr/Monkey.g4`. To play around with the
grammar an sources you cna use the `grun.sh` tool. This generates 
some Java classes and then show e.g. tokens, tree or an graphical 
parse tree, e.g.:

    $> ./grun.sh test.mk

To change options see the script.

## Prerequisites

For the ANTLR code generator or the `grun.sh` tool you need Java 
installed. The scripts will respect `$JAVA_HOME`, if set.

## What Todo Next

1. Add CLI interface (`monkey repl|run`)
    - [kingpin how-to](https://developer.atlassian.com/blog/2016/03/building-helpful-golang-cli-tools/)
    - [kingpin]()https://github.com/alecthomas/kingpin)
2. Read from file `monkey run <file>`
3. Use [ANTLR](https://github.com/antlr/antlr4/blob/master/doc/go-target.md) as frontend

[interpreter-book]: https://interpreterbook.com
[antlr]:            http://www.antlr.org
[go-antlr-rt]:      https://github.com/antlr/antlr4/blob/master/doc/go-target.md